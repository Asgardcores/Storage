:root{
  --steel:#3a6ea5;
  --steel-dark:#2d5783;
  --bg:#f4f6f8;
  --card:#ffffff;
  --text:#0b1620;
  --muted:#8aa4bf;
  --ok:#1f8f2e;             /* Locked */
  --vacant:#ffffff;          /* Vacant */
  --overlocked:#b71c1c;      /* Overlocked */
  --issue:#f39c12;           /* Issue */
  --shadow:0 2px 8px rgba(0,0,0,.12);
  --inset-press: inset 0 3px 8px rgba(0,0,0,.28),
                 inset 0 1px 0 rgba(255,255,255,.45),
                 inset 0 0 0 1px rgba(0,0,0,.08);
  --print-scale: 1;          /* updated by JS (100% default) */
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);touch-action:manipulation;overscroll-behavior-y:none}
.app{max-width:900px;margin:0 auto;display:flex;flex-direction:column;min-height:100vh}
header{position:sticky;top:0;background:var(--card);box-shadow:var(--shadow);z-index:10}
header .row{display:flex;gap:.5rem;align-items:center;padding:.5rem .75rem;flex-wrap:wrap}
header .row > *{flex:1}
h1{font-size:1rem;margin:0;color:var(--steel);letter-spacing:.5px}
.btn{display:inline-flex;justify-content:center;align-items:center;border:1px solid transparent;border-radius:.75rem;padding:.7rem 1rem;background:var(--steel);color:#fff;font-weight:600;box-shadow:var(--shadow);cursor:pointer;transition: background .15s ease, color .15s ease, border-color .15s ease}
.btn.secondary{background:#e9f0f8;color:var(--steel);font-weight:700}
.btn.ghost{background:transparent;color:var(--steel);box-shadow:none;border:2px solid var(--steel)}
.toolbar{display:flex;gap:.5rem}
input[type="date"], select{width:100%;padding:.65rem;border-radius:.6rem;border:1px solid #c9d6e6;background:#fff;color:var(--text)}
main{flex:1;display:flex;flex-direction:column;gap:.75rem;padding:.75rem}

/* Carousel */
.carousel-wrap{position:sticky;top:58px;background:var(--bg);padding:.4rem 0 .35rem;z-index:5}
.carousel{display:flex;gap:.5rem;overflow-x:auto;overflow-y:hidden;padding:.35rem .5rem;scroll-behavior:smooth;scroll-snap-type:x mandatory;touch-action:pan-x;-webkit-overflow-scrolling:touch}
.carousel::-webkit-scrollbar{display:none}
.unit-pill{position:relative;flex:0 0 auto;min-width:52px;aspect-ratio:1/1;border-radius:.6rem;background:#e8eef6;display:flex;align-items:center;justify-content:center;font-weight:700;color:#244a72;border:2px solid transparent;box-shadow: inset 0 2px 0 rgba(255,255,255,.35), inset 0 -2px 0 rgba(0,0,0,.18);scroll-snap-align:center}
.unit-pill.active{outline:none;border-color:#2b66a0;box-shadow:0 0 0 3px rgba(58,110,165,.15)}
.unit-pill .badge{position:absolute;font-size:.75rem;line-height:1}
.unit-pill .badge.dot{top:.2rem;left:.25rem;width:.5rem;height:.5rem;border-radius:999px;background:#2b66a0}
.unit-pill .badge.multi{top:.2rem;right:.25rem;color:#0b2239}
.unit-pill .badge.note{bottom:.2rem;left:.25rem;color:#0b2239}

.panels{display:grid;grid-template-columns:1fr;gap:.75rem}
@media(min-width:720px){.panels{grid-template-columns:1.2fr .8fr}}
.card{background:var(--card);border-radius:1rem;box-shadow:var(--shadow);padding:1rem;position:relative}
.section-title{font-weight:800;color:#2b66a0;margin:0 0 .75rem}

/* Status buttons */
.status-grid{display:grid;grid-template-columns:1fr 1fr;gap:.6rem}
.status-btn{position:relative;border-radius:.9rem;padding:1rem;font-weight:800;text-align:center;border:1px solid transparent;background:var(--steel);color:#fff;box-shadow:0 2px 0 rgba(0,0,0,.15), var(--shadow);cursor:pointer;transition: background .15s ease, color .15s ease, box-shadow .15s ease, border-color .15s ease}
.status-btn[data-active="true"]{background:#e5ecf5;color:#b71c1c;box-shadow:var(--inset-press);border-color:#b9c8db}

/* Legend */
.status-legend{display:flex;gap:.5rem;flex-wrap:wrap;font-size:.85rem;color:#33597f}
.legend-pill{display:inline-flex;align-items:center;gap:.4rem;padding:.3rem .55rem;border-radius:.7rem;background:#eef4fb}
.swatch{width:.9rem;height:.9rem;border-radius:.2rem;border:1px solid #9db2c8}

/* Preview hidden */
#previewCard{display:none !important}

/* Image frames (kept for future) */
.images-and-meta{display:grid;grid-template-columns:auto 1fr;gap:.75rem;align-items:start}
.meta-checks{display:grid;gap:.25rem}
.meta-group{background:#eef4fb;border:1px solid #c5d6ea;border-radius:.6rem;padding:.35rem .5rem}
.meta-group h4{margin:.2rem 0 .35rem;font-size:.8rem;color:#31567a}
.meta-group .row{display:flex;gap:.35rem;flex-wrap:wrap}
.meta-group label{display:flex;align-items:center;gap:.35rem;font-size:.85rem}
.image-strip{display:grid;grid-template-columns:1fr 1fr 1fr;gap:.5rem}
.image-frame{position:relative;border:2px solid transparent;border-radius:.6rem;overflow:hidden;background:#e9eef5;aspect-ratio:4/3;display:flex;align-items:center;justify-content:center}
.image-frame.center{border-color:#2b66a0}
.image-frame img{max-width:100%;width:100%;height:100%;object-fit:cover}

textarea, input[type="text"], input[type="tel"]{width:100%;padding:.7rem;border:1px solid #c9d6e6;border-radius:.6rem;background:#fff}
textarea{min-height:88px;resize:vertical}
.contact-info{display:grid;gap:.5rem}
.contact-row{display:grid;grid-template-columns:1fr 1fr;gap:.5rem}
/* Hide the Note field under contact info */
#contactNote{display:none !important}

.mini-current{margin-top:.5rem;display:flex;gap:.5rem;align-items:center}
.mini-box{min-width:52px;aspect-ratio:1/1;border-radius:.6rem;background:#e8eef6;display:flex;align-items:center;justify-content:center;font-weight:800;color:#244a72;border:2px solid #2b66a0;position:relative}
.mini-box .badge{position:absolute;font-size:.75rem}
.mini-box .badge.dot{top:.2rem;left:.25rem;width:.5rem;height:.5rem;border-radius:999px;background:#2b66a0}
.mini-box .badge.multi{top:.2rem;right:.25rem}
.mini-box .badge.note{bottom:.2rem;left:.25rem}

.nav-bottom{position:sticky;bottom:0;display:grid;grid-template-columns:1fr 1fr;gap:.5rem;padding:.75rem;background:linear-gradient(180deg, rgba(244,246,248,.8), rgba(244,246,248,1))}
.nav-bottom .btn{width:100%}

/* Ranges / Menu Drawer */
.drawer{position:fixed;inset:0;display:none}
.drawer[open]{display:block}
.drawer .shade{position:absolute;inset:0;background:rgba(0,0,0,.35)}
.drawer .panel{position:absolute;inset:auto 0 0 0;background:var(--card);border-radius:1rem 1rem 0 0;box-shadow:0 -4px 24px rgba(0,0,0,.2);padding:1rem 1rem 1.25rem;max-height:85vh;overflow:auto}
.range-list{display:grid;gap:.5rem;margin-top:.5rem}
.range-item{display:grid;grid-template-columns:1fr 1fr auto auto auto;gap:.4rem;align-items:center}
.range-item input{padding:.55rem}
.icon-btn{border:none;background:#edf3fa;border-radius:.6rem;padding:.45rem .55rem;font-weight:800;color:#244a72}

/* Report page */
.report{display:none}
.report[active]{display:block}
.filters{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:.5rem}
.toggle{padding:.45rem .7rem;border-radius:.8rem;border:2px solid var(--steel);color:var(--steel);background:#fff;font-weight:700}
.toggle[data-on="true"]{background:var(--steel);color:#fff}
table{width:100%;border-collapse:collapse;background:#fff;border-radius:.8rem;overflow:hidden}
th,td{padding:.6rem;border-bottom:1px solid #e4ecf6;text-align:left;vertical-align:top}
thead th{background:#eef4fb;color:#234a73}
.muted{color:#6c86a3}
.lastmod{font-size:.85rem;color:#33597f}

/* Report status blocks */
.status-cell{display:flex;gap:.35rem;align-items:center;flex-wrap:wrap}
.status-block{width:14px;height:14px;border-radius:.25rem;border:1px solid #c9d6e6;box-shadow:inset 0 0 0 1px rgba(255,255,255,.6)}
.status-block.locked{background:var(--ok);border-color:#166424}
.status-block.vacant{background:var(--vacant);border-color:#c9d6e6}
.status-block.overlocked{background:var(--overlocked);border-color:#7c0f0f}
.status-block.issue{background:var(--issue);border-color:#b0700a}

/* Spreadsheet toolbar + host */
.sheet-io .opt{display:inline-flex;align-items:center;gap:.35rem;padding:.35rem .55rem;border-radius:.6rem;background:#eef4fb;color:#234a73}
.sheet-host table{width:100%;border-collapse:collapse;background:#fff;border-radius:.6rem;overflow:hidden}
.sheet-host th,.sheet-host td{padding:.55rem;border:1px solid #e4ecf6;text-align:left;vertical-align:top}
.sheet-host thead th{background:#eef4fb;color:#234a73;font-weight:700}

/* Print: spreadsheet only + custom scale */
@media print{
  body *{ visibility: hidden !important; }
  #sheetWrap, #sheetWrap *{ visibility: visible !important; }
  #sheetWrap{ position: static !important; }

  #sheetPrintFit{
    transform: scale(var(--print-scale));
    transform-origin: top left;
    width: calc(100% / var(--print-scale));
  }
}
@page{
  size: letter landscape;
  margin: 12mm;
}

/* Filter chip in top-right of Status card */
.filter-chip{position:absolute;top:1rem;right:1rem;font-size:.8rem;padding:.35rem .6rem}
.filter-chip[data-on="true"]{background:var(--steel);color:#fff;border-color:var(--steel)}
